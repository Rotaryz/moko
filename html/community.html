<!DOCTYPE html>
<html ng-controller="appCtrl">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title></title>
		<link rel="stylesheet" href="../node_modules/weui/dist/style/weui.css">
	</head>

	<body ng-app="mokoApp">
		<div class="weui-cell" ng-controller="textareaCtrl">
			<div class="weui-cell__bd">
				<textarea class="weui-textarea" ng-keydown="show()" placeholder="请输入文本" rows="8" maxlength="200"></textarea>
				<div class="weui-textarea-counter"><span ng-bind="msg">0</span>/200</div>
			</div>
		</div>
		<div class="weui-cell"  ng-controller="picCtrl">
			<div class="weui-cell__bd">
				<div class="weui-uploader">
					<div class="weui-uploader__hd">
						<p class="weui-uploader__title">图片上传</p>
						<div class="weui-uploader__info">0/2</div>
					</div>
					<div class="weui-uploader__bd">
						<ul class="weui-uploader__files" id="uploaderFiles">
						</ul>
						<form class="weui-uploader__input-box">
							<input id="uploaderInput" class="weui-uploader__input" type="file" ng-click="show()" name="pic">
						</form>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="../lib/angular.js"></script>
	<script src="../lib/jquery-3.2.1.js"></script>
	<script>
		let app = angular.module('mokoApp',[]);
		app.controller("textareaCtrl", function($scope){
				$scope.msg = 0;
			$scope.show = ()=>{
				$scope.msg = $('.weui-textarea').val().length+1;
			}
		});
		app.controller("picCtrl", function($scope){
			$scope.show = ()=>{
				$.ajax({
					url: '',
					type: '',
					cache: false,
					data: new FormData($('#uploadForm')[0]),
					processData: false,
					contentType: false,
					success: data=>{
						
					}
				})
			}
		});
	</script>

</html>